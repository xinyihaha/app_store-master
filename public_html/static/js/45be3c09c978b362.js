(function(){var e={uniqueId:function(){var e=+(new Date)+"-",t=0;return function(){return e+ ++t}}(),send:function(e,t){var n=this.uniqueId(),r=window.imageLogData||(window.imageLogData={}),i=r[n]=new Image;i.onerror=i.onload=function(){t&&t(),i.onerror=i.onload=null,i=null,delete r[n]},i.src=e+(e.indexOf("?")==-1?"?":"&")+"_="+n},getAppInfo:function(e,t){var n="http://openbox.mobilem.360.cn/index/getSoftInfoByIdsAccordingToFields/sids/"+e+"/fields/",r=["pname","soft_id","soft_name","logo_url","download_urls","version_code","apk_sizes","signature_md5s","type","baike_name"];n+=r.join("|"),$.ajax({url:n,dataType:"jsonp",success:function(n){appData=n[e];var r={apkid:appData.pname,soft_id:appData.soft_id,name:appData.soft_name,baike_name:appData.baike_name,type:appData.type,logo_url:appData.logo_url,version_code:appData.version_code,down_url:appData.download_urls.split(",")[0],signature_md5:appData.signature_md5s.split(",")[0],size:appData.apk_sizes.split(",")[0]};t(r)}})},getSign:function(e,t){$.ajax({url:"http://openbox.mobilem.360.cn/qing/spiritkey?key="+encodeURIComponent(e),dataType:"jsonp",success:function(e){t(e.sign)}})}},t={install:function(t){var n={url:t.url,sign:t.sign,logo:t.logo,name:t.name},r="http://qstore.inner.api.sj.360.cn:38517/in?"+$.param(n);e.send(r)},openTab:function(e,t){t=t||function(){};if(!this.G_clientData||!this.G_clientData.server_version){t({isSuccssed:!1});return}$.ajax({url:"http://qstore.inner.api.sj.360.cn:38517/openActivity",data:e,dataType:"jsonp",success:function(e){t(e)},error:function(e){t({isSuccssed:!1})}})},isInstalled:function(e,t){t=t||function(){};if(!this.G_clientData||!this.G_clientData.server_version){t({isInstalled:!1});return}$.ajax({url:"http://qstore.inner.api.sj.360.cn:38517/isAppInstalled",data:e,dataType:"jsonp",success:function(e){t(e)},error:function(e){t({isInstalled:!1})}})},openPage:function(e,t){t=t||function(){};if(!this.G_clientData){t({isSuccssed:!1});return}$.ajax({url:"http://qstore.inner.api.sj.360.cn:38517/openPage?needCookie=1&url="+encodeURIComponent(e)+"&_="+Math.random(),dataType:"jsonp",success:function(e){t(e)},error:function(e){t({isSuccssed:!1})}})},detect:function(e){function t(){if(r>=u){if(s)return;e(!1),s=!0;return}$.ajax({url:"http://qstore.inner.api.sj.360.cn:38517/getClientInfo",data:{_:Math.random()},dataType:"jsonp",success:function(t){clearTimeout(i);if(s)return;e(t),s=!0,n.G_clientData=t},error:function(e){clearTimeout(i),r+=1,t()}}),i=setTimeout(function(){r+=1,t()},o)}var n=this,r=0,i,s=!1,o=50,u=15,a;t(),a=setTimeout(function(){if(s)return;e(!1),s=!0},o*u)}},n={detect:function(e){t.detect(function(t){e(t)})},install:function(t){var n=this;typeof t=="number"||/^\d+$/i.test(""+t)?e.getAppInfo(t,function(e){e.url=e.down_url,e.logo=e.logo_url,e.name=e.name,n._install(e)}):n._install(t)},isInstalled:function(n,r){var i={packageName:n,_:Math.random()};e.getSign(n,function(e){i.sign=e,t.isInstalled(i,r)})},openTab:function(n,r){var i={from:"360Wifi",startIndex:n,_:Math.random()};e.getSign(n,function(e){i.sign=e,t.openTab(i,r)})},openPage:function(e,n){t.openPage(e,n)},getMaster:function(e){return"http://api.np.mobilem.360.cn/redirect/down?from=sjzs_100160&zsgs=1&sid="+e},_install:function(n){e.getSign(n.url,function(e){n.sign=e,t.install(n)})}};window.Spirit=n})(),function(){var e=Spirit.env={},t=window.navigator.userAgent.toLowerCase();window.AndroidWebview&&(e.isZS=!0);if(/MicroMessenger/i.test(t)||window.WeixinJSBridge)e.isWC=!0}();